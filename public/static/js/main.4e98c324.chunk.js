(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{26:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(20),a=n.n(r),s=(n(26),n(3)),l=n(2),j=n(0),i=Object(c.createContext)(null);function o(e){var t=e.children,n=Object(c.useState)(null),r=Object(l.a)(n,2),a=r[0],o=r[1],u=Object(s.useHistory)();return Object(j.jsx)(i.Provider,{value:{user:a,setUser:o,stayLoggedIn:function(){fetch("/me").then((function(e){e.ok?e.json().then((function(e){return o(e)})):u.push("/")}))}},children:t})}var u=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(l.a)(a,2),u=o[0],b=o[1],d=Object(c.useState)(""),O=Object(l.a)(d,2),h=O[0],x=O[1],p=Object(c.useState)([]),m=Object(l.a)(p,2),f=m[0],g=m[1],v=Object(c.useContext)(i).setUser,C=Object(s.useHistory)();return Object(j.jsxs)("form",{className:"signup",onSubmit:function(e){e.preventDefault(),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:u,password_confirmation:h})}).then((function(e){e.ok?e.json().then((function(e){v(e),C.push("/dealers")})):e.json().then((function(e){return g(e.errors)}))}))},children:[Object(j.jsx)("h1",{children:"Sign Up"}),Object(j.jsx)("label",{children:"Username:"}),Object(j.jsx)("input",{type:"text",id:"username",autoComplete:"off",value:n,onChange:function(e){return r(e.target.value)}}),Object(j.jsx)("label",{children:"Password:"}),Object(j.jsx)("input",{type:"password",id:"password",value:u,onChange:function(e){return b(e.target.value)},autoComplete:"current-password"}),Object(j.jsx)("label",{children:"Password Confirmation:"}),Object(j.jsx)("input",{type:"password",id:"password_confirmation",value:h,onChange:function(e){return x(e.target.value)},autoComplete:"current-password"}),Object(j.jsx)("br",{}),f.length>0&&Object(j.jsx)("ul",{style:{color:"red"},children:f.map((function(e){return Object(j.jsx)("li",{children:e},e)}))}),Object(j.jsx)("button",{type:"submit",children:"Sign Up"})]})},b=n(5),d=n(13),O=n(4),h=Object(c.createContext)(null);function x(e){var t=e.children,n=Object(c.useState)([]),r=Object(l.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)([]),o=Object(l.a)(i,2),u=o[0],b=o[1];return Object(j.jsx)(h.Provider,{value:{dealers:a,setDealers:s,getDealers:function(){fetch("/dealers").then((function(e){return e.json()})).then((function(e){s(e)}))},handleAddDealer:function(e){s([].concat(Object(d.a)(a),[e])),console.log("Dealer Created: ",e)},currentDealer:u,setCurrentDealer:b},children:t})}var p=Object(c.createContext)(null);function m(e){var t=e.children,n=Object(c.useState)([]),r=Object(l.a)(n,2),a=r[0],s=r[1],i=Object(c.useContext)(h),o=i.dealers,u=i.setDealers;return Object(j.jsx)(p.Provider,{value:{cars:a,setCars:s,handleUpdateCar:function(e){var t=a.map((function(t){return t.id===e.id?e:t}));s(t);var n=o.map((function(n){return n.id===e.dealer_id?Object(O.a)(Object(O.a)({},n),{},{cars:t}):n}));u(n),console.log("Car Updated: ",e)},handleAddNewCar:function(e){s([].concat(Object(d.a)(a),[e]));var t=o.map((function(t){return t.id===e.dealer_id?Object(O.a)(Object(O.a)({},t),{},{cars:[].concat(Object(d.a)(t.cars),[e])}):t}));u(t)},handleDeleteCar:function(e){var t=a.filter((function(t){return t.id!==e.id}));s(t);var n=o.map((function(n){return n.id===e.dealer_id?Object(O.a)(Object(O.a)({},n),{},{cars:t}):n}));u(n)}},children:t})}var f=function(){var e=Object(c.useContext)(i),t=e.user,n=e.setUser,r=Object(c.useContext)(p).cars,a=Object(c.useContext)(h).currentDealer,l=Object(s.useHistory)(),o={width:"50px",padding:"10px",margin:"0 2px 2px",color:"white"};return Object(j.jsx)("div",{className:"nav-bar",children:Object(j.jsx)("header",{children:Object(j.jsx)("div",{className:"buttons-logs",children:t?Object(j.jsxs)("div",{children:[Object(j.jsxs)("h3",{children:["Welcome, ",t.username]}),Object(j.jsx)("button",{onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&n(null)})),l.push("/")},children:"Logout"}),null==r?Object(j.jsxs)("div",{className:"dealers-link",children:[Object(j.jsx)(b.b,{to:"/dealers",style:o,children:"Dealers"}),Object(j.jsx)(b.b,{to:"/dealers/new",style:o,children:"New Dealer"})]}):Object(j.jsxs)("div",{className:"cars-link",children:[Object(j.jsx)(b.b,{to:"/dealers",style:o,children:"Dealers"}),Object(j.jsx)(b.b,{to:"/dealers/".concat(a.id,"/cars"),style:o,children:"Cars"}),Object(j.jsx)(b.b,{to:"/dealers/".concat(a.id,"/cars/new"),style:o,children:"New Car"})]})]}):Object(j.jsxs)("div",{className:"buttons-logs",children:[Object(j.jsx)(b.b,{to:"/signup",style:o,children:"Signup"}),Object(j.jsx)(b.b,{to:"/login",style:o,children:"Login"})]})})})})};var g=function(){return Object(j.jsx)("div",{className:"app-header",children:Object(j.jsx)("header",{children:Object(j.jsx)("h1",{children:"Car Finder "})})})};var v=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(l.a)(a,2),u=o[0],b=o[1],d=Object(c.useState)({}),O=Object(l.a)(d,2),h=O[0],x=O[1],p=Object(c.useContext)(i).setUser,m=Object(s.useHistory)();return Object(j.jsxs)("form",{className:"login",onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:u})}).then((function(e){e.ok?e.json().then((function(e){p(e),m.push("/dealers")})):e.json().then((function(e){return x(e.error)}))}))},children:[Object(j.jsx)("h1",{children:"Login"}),Object(j.jsx)("label",{children:"Username: "}),Object(j.jsx)("input",{type:"text",id:"username",autoComplete:"off",value:n,onChange:function(e){return r(e.target.value)}}),Object(j.jsx)("label",{children:"Password: "}),Object(j.jsx)("input",{type:"password",id:"password",autoComplete:"current-password",value:u,onChange:function(e){return b(e.target.value)}}),Object(j.jsx)("br",{}),h.length>0&&Object(j.jsx)("ul",{style:{color:"red"},children:Object(j.jsx)("li",{children:h},h)}),Object(j.jsx)("button",{type:"submit",children:"Login"})]})};var C=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:"https://imagescdn.dealercarsearch.com/dealerimages/1123/20820/fxslide03.jpg",alt:"Home"})})};var y=function(e){var t=e.dealer,n=t.id,r=t.name,a=t.logo,s=t.location,l=t.cars,i=Object(c.useContext)(h).setCurrentDealer,o=Object(c.useContext)(p).setCars;return Object(j.jsx)(b.b,{exact:!0,to:"/dealers/".concat(n,"/cars"),onClick:function(){i(t),o(l)},children:Object(j.jsxs)("div",{className:"dealer-card",children:[Object(j.jsx)("img",{alt:"Company logo",src:a,className:"dealer-logo"}),Object(j.jsx)("h3",{children:r}),Object(j.jsxs)("p",{children:["Location: ",s]})]})})};var S=function(){var e=Object(c.useContext)(h),t=e.dealers,n=e.getDealers,r=Object(c.useContext)(p).setCars;Object(c.useEffect)((function(){n(),r(null)}),[]);var a=t.map((function(e){return Object(j.jsx)(y,{dealer:e},e.id)}));return Object(j.jsxs)("ul",{className:"dealer-container",children:[Object(j.jsx)("hr",{}),Object(j.jsx)("h1",{children:"DEALERS:"}),a]})},N=n(10);var D=function(e){var t=e.car,n=e.setIsUpdating,r=t.id,a=t.make,s=t.year,i=t.color,o=t.image,u=t.mileage,b=t.price,d=Object(c.useState)({id:r,make:a,year:s,color:i,image:o,mileage:u,price:b}),h=Object(l.a)(d,2),x=h[0],m=h[1],f=Object(c.useContext)(p).handleUpdateCar;function g(e){m(Object(O.a)(Object(O.a)({},x),{},Object(N.a)({},e.target.name,e.target.value)))}return Object(j.jsxs)("form",{className:"update-car-form",onSubmit:function(e){e.preventDefault(),fetch("/cars/".concat(r),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}).then((function(e){return e.json()})).then((function(e){n(!1),f(e)}))},children:[Object(j.jsx)("label",{children:"Make: "}),Object(j.jsx)("input",{label:"make:",type:"text",name:"make",value:x.make,onChange:g}),Object(j.jsx)("label",{children:"Year: "}),Object(j.jsx)("input",{type:"number",name:"year",value:x.year,onChange:g}),Object(j.jsx)("label",{children:"Color: "}),Object(j.jsx)("input",{type:"text",name:"color",value:x.color,onChange:g}),Object(j.jsx)("label",{children:"Image: "}),Object(j.jsx)("input",{type:"text",name:"image",value:x.image,onChange:g}),Object(j.jsx)("label",{children:"MIleage: "}),Object(j.jsx)("input",{type:"number",name:"mileage",value:x.mileage,onChange:g}),Object(j.jsx)("label",{children:"Price: "}),Object(j.jsx)("input",{type:"number",name:"price",value:x.price,onChange:g}),Object(j.jsx)("input",{type:"submit",value:"Save"})]})};var w=function(e){var t=e.car,n=Object(c.useState)(!1),r=Object(l.a)(n,2),a=r[0],s=r[1],o=Object(c.useContext)(i).user,u=Object(c.useContext)(h).currentDealer,b=Object(c.useContext)(p).handleDeleteCar,d=t.id,O=t.make,x=t.year,m=t.color,f=t.image,g=t.mileage,v=t.price,C=u.users?u.users.find((function(e){return e.id===t.user_id})):o;return Object(j.jsxs)("div",{className:"car-card",children:[a?Object(j.jsx)(D,{car:t,setIsUpdating:s}):Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"car-image",children:Object(j.jsx)("img",{alt:"car",src:f,className:"car-image"})}),Object(j.jsxs)("div",{className:"car-info",children:[Object(j.jsxs)("p",{children:[x," ",O]}),Object(j.jsxs)("p",{children:["Color: ",m]}),Object(j.jsxs)("p",{children:["Mileage: ",Intl.NumberFormat().format(g)]}),Object(j.jsxs)("p",{children:["Price: $",Intl.NumberFormat().format(v)]})]})]}),o&&o.id===t.user_id?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{onClick:function(){return s((function(e){return!e}))},children:"UPDATE"}),Object(j.jsx)("button",{onClick:function(){fetch("/cars/".concat(d),{method:"DELETE"}),b(t)},children:"DELETE"})]}):null,Object(j.jsxs)("p",{className:"car-owner",children:["Listed By: ",C.username]})]})};var E=function(){var e=Object(c.useContext)(p).cars,t=Object(c.useContext)(i).user;return Object(j.jsxs)("ul",{className:"car-container",children:[Object(j.jsx)("hr",{}),Object(j.jsx)("h1",{children:"CARS FOR SALE:"}),t&&0!==e.length?e.map((function(e){return Object(j.jsx)(w,{car:e},e.id)})):Object(j.jsx)("p",{children:"Currently, There are not Cars listed for this Dealer."})]})},k=n(16);var L=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)({name:"",logo:"",location:""}),s=Object(l.a)(a,2),i=s[0],o=s[1],u=Object(c.useContext)(h).handleAddDealer,b=Object(k.useHistory)();function d(e){o(Object(O.a)(Object(O.a)({},i),{},Object(N.a)({},e.target.name,e.target.value)))}return Object(j.jsxs)("form",{className:"new-dealer-form",onSubmit:function(e){e.preventDefault(),fetch("/dealers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){e.ok?e.json().then((function(e){u(e),o({name:"",logo:"",location:""}),b.push("/dealers")})):e.json().then((function(e){return r(e.errors)}))}))},children:[Object(j.jsx)("h2",{children:"NEW DEALER FORM: "}),Object(j.jsx)("label",{children:"Dealer Name:"}),Object(j.jsx)("input",{type:"text",name:"name",placeholder:"Enter Dealer Name..",value:i.name,onChange:d}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{children:"Logo:"}),Object(j.jsx)("input",{type:"text",name:"logo",placeholder:"Enter img URL..",value:i.logo,onChange:d}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{children:"Location: "}),Object(j.jsx)("input",{type:"text",name:"location",placeholder:"Enter Dealer Address..",value:i.location,onChange:d}),Object(j.jsx)("br",{}),n.length>0&&Object(j.jsx)("ul",{style:{color:"red"},children:n.map((function(e){return Object(j.jsx)("li",{children:e},e)}))}),Object(j.jsx)("button",{type:"Submit",children:"Add Dealer"})]})};var P=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)({make:"",year:"",color:"",image:"",mileage:"",price:""}),s=Object(l.a)(a,2),o=s[0],u=s[1],b=Object(c.useContext)(i).user,d=Object(c.useContext)(h).currentDealer,x=Object(c.useContext)(p).handleAddNewCar,m=Object(k.useHistory)();function f(e){u(Object(O.a)(Object(O.a)({},o),{},Object(N.a)({},e.target.name,e.target.value)))}return Object(j.jsxs)("form",{className:"new-car-form",onSubmit:function(e){e.preventDefault(),fetch("/cars",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(O.a)(Object(O.a)({},o),{},{user_id:b.id,dealer_id:d.id}))}).then((function(e){e.ok?e.json().then((function(e){x(e),u({make:"",year:"",color:"",image:"",mileage:"",price:""}),m.push("/dealers/".concat(d.id,"/cars"))})):e.json().then((function(e){return r(e.errors)}))}))},children:[Object(j.jsx)("h2",{children:"NEW CAR FORM:"}),Object(j.jsx)("label",{children:"Make: "}),Object(j.jsx)("input",{type:"text",name:"make",placeholder:"Enter Make/Model Name..",value:o.make,onChange:f}),Object(j.jsx)("label",{children:"Year: "}),Object(j.jsx)("input",{type:"number",name:"year",placeholder:"Enter Year..",value:o.year,onChange:f}),Object(j.jsx)("label",{children:"Color: "}),Object(j.jsx)("input",{type:"text",name:"color",placeholder:"Enter Color..",value:o.color,onChange:f}),Object(j.jsx)("label",{children:"Image: "}),Object(j.jsx)("input",{type:"text",name:"image",placeholder:"Enter Image URL..",value:o.image,onChange:f}),Object(j.jsx)("label",{children:"Mileage: "}),Object(j.jsx)("input",{type:"number",name:"mileage",placeholder:"Enter Mileage..",value:o.mileage,onChange:f}),Object(j.jsx)("label",{children:"Price: "}),Object(j.jsx)("input",{type:"number",name:"price",placeholder:"Enter Price..",value:o.price,onChange:f}),Object(j.jsx)("br",{}),n.length>0&&Object(j.jsx)("ul",{style:{color:"red"},children:n.map((function(e){return Object(j.jsx)("li",{children:e},e)}))}),Object(j.jsx)("button",{type:"Submit",children:"Add Car"})]})};var T=function(){var e=Object(c.useContext)(i),t=e.user,n=e.stayLoggedIn,r=Object(c.useContext)(h).currentDealer;return Object(c.useEffect)((function(){n()}),[]),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(g,{}),Object(j.jsx)(f,{}),t?Object(j.jsxs)(s.Switch,{children:[Object(j.jsx)(s.Route,{exact:!0,path:"/dealers",children:Object(j.jsx)(S,{})}),Object(j.jsx)(s.Route,{exact:!0,path:"/dealers/".concat(r.id,"/cars"),children:Object(j.jsx)(E,{})}),Object(j.jsxs)(s.Route,{exact:!0,path:"/dealers/new",children:[Object(j.jsx)("hr",{}),Object(j.jsx)(L,{})]}),Object(j.jsxs)(s.Route,{exact:!0,path:"/dealers/".concat(r.id,"/cars/new"),children:[Object(j.jsx)("hr",{}),Object(j.jsx)(P,{})]})]}):Object(j.jsxs)(s.Switch,{children:[Object(j.jsxs)(s.Route,{exact:!0,path:"/signup",children:[Object(j.jsx)(u,{}),Object(j.jsx)(C,{})]}),Object(j.jsxs)(s.Route,{exact:!0,path:"/login",children:[Object(j.jsx)(v,{}),Object(j.jsx)(C,{})]}),Object(j.jsx)(C,{})]})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};a.a.render(Object(j.jsx)(b.a,{children:Object(j.jsx)(o,{children:Object(j.jsx)(x,{children:Object(j.jsx)(m,{children:Object(j.jsx)(T,{})})})})}),document.getElementById("root")),U()}},[[36,1,2]]]);
//# sourceMappingURL=main.4e98c324.chunk.js.map